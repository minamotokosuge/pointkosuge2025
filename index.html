<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>こすげ村人ポイント</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4CAF50">
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/uuid@latest/dist/umd/uuidv4.min.js"></script>
</head>
<body>
    <div id="app">
        <header>
            <h1>こすげ村人ポイント</h1>
        </header>

        <section id="settingsSection">
            <h2>店舗設定</h2>
            <label for="storeId">店舗ID:</label>
            <input type="text" id="storeId" placeholder="例: 道の駅こすげ">
            <br>
            <label for="points">付与ポイント:</label>
            <input type="number" id="points" placeholder="例: 1" min="1">
            <br>
            <button id="saveSettings">設定を保存</button>
            <p id="settingsStatus"></p>
        </section>

        <section id="scannerSection" style="display: none;">
            <h2>QRコードリーダー</h2>
            <div id="qr-reader" style="width: 100%; max-width: 500px; margin: auto;"></div>
            <div id="qr-reader-results"></div>
            <p>現在の店舗: <b id="currentStore"></b> | ポイント: <b id="currentPoints"></b> pt</p>
            <button id="changeSettings">店舗設定を変更</button>
        </section>

        <section id="statusSection">
            <h2>同期ステータス</h2>
            <p>オンライン: <span id="onlineStatus"></span></p>
            <p>未同期件数: <span id="queueCount">0</span>件</p>
            <p>最終同期試行: <span id="lastSyncAttempt">なし</span></p>
            <p>最終同期成功: <span id="lastSyncSuccess">なし</span></p>
            <p>端末ID: <span id="deviceIdDisplay"></span></p>
            <button id="syncNow">今すぐ同期</button>
            <p id="syncStatus"></p>
        </section>
         <section id="dataManagementSection">
            <h2>データ管理</h2>
            <button id="clearLocalStorage">端末設定リセット</button>
            <button id="viewQueuedData">未同期データ確認</button>
            <div id="queuedDataDisplay" style="white-space: pre-wrap; font-family: monospace; max-height: 200px; overflow-y: auto; border: 1px solid #ccc; padding: 5px; margin-top:5px; display:none;"></div>
        </section>
    </div>

    <script src="app.js"></script>
</body>
</html>
